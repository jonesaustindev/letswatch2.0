{"version":3,"file":"static/webpack/static\\development\\pages\\movie.js.4f36199c22564f84bf63.hot-update.js","sources":["webpack:///./components/AddToLikes.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport { Mutation, Query } from 'react-apollo';\r\nimport gql from 'graphql-tag';\r\nimport styled from 'styled-components';\r\nimport { USER_LIKES_QUERY } from './Likes';\r\n\r\nconst LikedBtn = styled.button`\r\n    color: red;\r\n`;\r\n\r\nconst NotLikedBtn = styled.button`\r\n    color: blue;\r\n`;\r\n\r\nconst ADD_TO_LIKES_MUTATION = gql`\r\n    mutation addToLikes($like: String!) {\r\n        addToLikes(like: $like) {\r\n            id\r\n        }\r\n    }\r\n`;\r\n\r\nclass AddToLikes extends Component {\r\n    render() {\r\n        const { id } = this.props;\r\n        return (\r\n            <Mutation\r\n                mutation={ADD_TO_LIKES_MUTATION}\r\n                variables={{ like: id }}\r\n                refetchQueries={[{ query: USER_LIKES_QUERY }]}\r\n            >\r\n                {addToLikes => (\r\n                    <Query\r\n                        query={USER_LIKES_QUERY}\r\n                    >\r\n                        {({ data, loading, error }) => {\r\n                            if(loading) return <p>Loading...</p>\r\n                            if(error) return <p>Error: {error.message}</p>\r\n\r\n                            const movieId = id.toString();\r\n                            const currentUserLikes = data.likeListItems.map((movie) => {\r\n                                return movie.like\r\n                            });\r\n                            const checkedLikes = currentUserLikes.includes(movieId);\r\n\r\n                            if(checkedLikes == false) {\r\n                                return <NotLikedBtn onClick={addToLikes}>Like</NotLikedBtn>\r\n                            }\r\n\r\n                            return <LikedBtn>Like</LikedBtn>\r\n                        }}\r\n                    </Query>\r\n                )}\r\n            </Mutation>\r\n        )\r\n    }\r\n}\r\n\r\nexport default AddToLikes;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAIA;AACA;AAOA;;;;;;;;;;;;;AACA;AAAA;AAEA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAEA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAnBA;AAwBA;;;;AAjCA;AACA;AAmCA;;;;A","sourceRoot":""}